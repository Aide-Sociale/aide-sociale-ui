<div class="page-header">
  <h1><i class="fa fa-tasks"></i> Tests d'acceptance DDS</h1>
</div>

<p>
  <button type="button" ng-disabled="pendingTests > 0" class="btn btn-default" ng-click="launchAll()">
    <span ng-if="pendingTests > 0">
      <i class="fa fa-spinner fa-spin"></i> Tests en cours...
    </span>
    <span ng-if="pendingTests === 0">
      Lancer tous les tests
    </span>
  </button>
</p>

<table class="table table-bordered">
  <thead>
    <tr>
      <th>Test</th>
      <th>Description</th>
      <th>Droit</th>
      <th>Résultat attendu</th>
      <th>Résultat obtenu</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody ng-repeat="test in tests">
    <tr ng-repeat="droit in test.droits" ng-class="{'success': droit.status === 'ok', 'danger': droit.status === 'ko', 'info': droit.status === 'unknown'}">
      <th rowspan="{{ test.droits.length }}" ng-if="$first">{{ test.name }}</th>
      <td rowspan="{{ test.droits.length }}" ng-if="$first">{{ test.description }}</td>
      <td>{{ droit.name }}</td>
      <td>{{ displayDroitValue(droit.expectedValue) }}</td>
      <td>{{ displayDroitValue(droit.actualValue) }}</td>
      <td rowspan="{{ test.droits.length }}" ng-if="$first">
        <button type="button" class="btn btn-default btn-xs" ng-click="launchSingle(test)">
          Relancer
        </button>
      </td>
    </tr>
  </tbody>
</table>
