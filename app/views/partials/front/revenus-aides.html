<div class="page-header">
  <h1>Revenus de votre foyer</h1>
</div>

<accordion close-others="false">
  <accordion-group ng-repeat="section in sections" is-open="section.open">
    <accordion-heading>
      {{ section.label }} <i class="pull-right fa" ng-class="{'fa-chevron-down': section.open, 'fa-chevron-right': !section.open}"></i>
    </accordion-heading>
    <table class="table">
      <thead>
        <tr>
          <th colspan="3"></th>
          <th>Mars</th>
          <th>Avril</th>
          <th>Mai</th>
        </tr>
      </thead>
      <tbody ng-repeat="subsection in section.subSections" ng-init="isFirstSubsection">
        <tr ng-repeat="individu in individus">
          <td ng-if="$first" rowspan="{{ individus.length }}" style="width: 300px;"><b>{{ subsection.label }}</b></td>
          <td style="width: 100px;">{{ individu.name }}</td>
          <td style="width: 50px;">
            <button class="btn btn-link" style="padding: 1px 5px;" btn-checkbox ng-model="individu.hasResources[subsection.name]">
              <i class="fa" ng-class="{'fa-plus-circle': !individu.hasResources[subsection.name], 'fa-trash-o': individu.hasResources[subsection.name]}"></i>
            </button>
          </td>
          <td style="max-width: 200px;">
            <div class="input-group" ng-if="individu.hasResources[subsection.name]">
              <input type="number" class="form-control text-right" value="0">
              <span class="input-group-addon">€</span>
            </div>
          </td>
          <td style="max-width: 200px;">
            <div class="input-group" ng-if="individu.hasResources[subsection.name]">
              <input type="number" class="form-control text-right" value="0">
              <span class="input-group-addon">€</span>
            </div>
          </td>
          <td style="max-width: 200px;">
            <div class="input-group" ng-if="individu.hasResources[subsection.name]">
              <input type="number" class="form-control text-right" value="0">
              <span class="input-group-addon">€</span>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </accordion-group>
</accordion>

<div class="text-center">
  <a ui-sref="logement" class="btn btn-lg btn-primary">Étape suivante</a>
</div>
