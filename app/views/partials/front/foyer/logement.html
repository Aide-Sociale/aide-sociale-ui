<div ng-class="{'col-lg-5': situation.logement.formCompleted}" ng-show="situation.formLogement">
  <h2>
    <i class="fa fa-home"></i>
    Votre logement principal
  </h2>

  <form name="form" class="form-horizontal" ng-submit="submit()" ng-if="!situation.logement.formCompleted">
    <div class="form-group">
      <label class="col-sm-3 control-label">Êtes-vous</label>
      <div class="col-sm-8">
        <button
          type="button"
          ng-repeat="logementType in logementTypes"
          name="logementType"
          class="btn btn-sm btn-primary"
          ng-model="situation.logement.type"
          btn-radio="logementType.value"
          popover-placement="top"
          popover="{{ logementType.helpText }}"
          popover-trigger="mouseenter">
          {{ logementType.label|uppercaseFirst }}
        </button>
      </div>
    </div>

    <div class="form-group" ng-show="situation.logement.type === 'locataire' || situation.logement.type === 'payant'">
      <label class="col-sm-3 control-label">Le propriétaire de votre logement est-il un membre de votre famille&nbsp;?</label>
      <div class="col-sm-8">
        <button type="button" class="btn btn-sm btn-primary" ng-model="situation.logement.membreFamilleProprietaire" btn-radio="true">Oui</button>
        <button type="button" class="btn btn-sm btn-primary" ng-model="situation.logement.membreFamilleProprietaire" btn-radio="false">Non</button>
      </div>
    </div>

    <div class="form-group" ng-show="situation.logement.type === 'locataire' && undefined !== situation.logement.membreFamilleProprietaire">
      <label class="col-sm-3 control-label">Quel type de logement louez-vous&nbsp;?</label>
      <div class="col-sm-6">
        <button
          type="button"
          class="btn btn-primary btn-sm"
          ng-model="situation.logement.locationType"
          btn-radio="locationType.value"
          ng-repeat="locationType in locationTypes">
          {{ locationType.label|uppercaseFirst }}
        </button>
      </div>
    </div>

    <div class="form-group" ng-show="situation.logement.type === 'proprietaire'">
      <label class="col-sm-3 control-label" popover="{{ primoAccedantTooltip }}" popover-trigger="mouseenter">
        Êtes-vous primo-accédant pour votre propriété&nbsp;?
      </label>
      <div class="col-sm-6">
        <button type="button" class="btn btn-sm btn-primary" ng-model="situation.logement.primoAccedant" btn-radio="true">Oui</button>
        <button type="button" class="btn btn-sm btn-primary" ng-model="situation.logement.primoAccedant" btn-radio="false">Non</button>
      </div>
    </div>

    <div class="form-group" ng-if="'gratuit' !== situation.logement.type && (undefined !== situation.logement.primoAccedant || undefined !== situation.logement.locationType || ('payant' === situation.logement.type && undefined !== situation.logement.membreFamilleProprietaire))">
      <label class="col-sm-3 control-label" for="loyer">
        {{ 'proprietaire' === situation.logement.type ? 'Votre mensualité d\'emprunt' : 'Votre loyer' }} ?
      </label>
      <div class="col-sm-2">
        <div class="input-group">
          <input class="form-control text-right" id="loyer" name="loyer" ng-model="situation.logement.loyer" type="number" required>
          <div class="input-group-addon">€</div>
        </div>
      </div>
      <div class="col-sm-7">
        <span class="help-block" ng-if="'proprietaire' === situation.logement.type"><em>Mettre 0 si vous n'avez pas d'emprunt pour votre propriété.</em></span>
      </div>
    </div>

    <div
      class="form-group"
      ng-show="undefined !== situation.logement.primoAccedant || undefined !== situation.logement.locationType || 'gratuit' === situation.logement.type || (situation.logement.type === 'payant' && undefined !== situation.logement.membreFamilleProprietaire)">
      <label class="col-sm-3 control-label" for="postal-code">Quel est le code postal de votre résidence&nbsp;?</label>
      <div class="col-sm-2">
        <input class="form-control" id="postal-code" name="codePostal" ng-model="situation.logement.adresse.codePostal" type="number" required>
      </div>
    </div>

    <div class="text-center">
      <button
        type="submit"
        class="btn btn-lg btn-primary"
        ng-if="undefined !== situation.logement.primoAccedant || undefined !== situation.logement.locationType || 'gratuit' === situation.logement.type || ('payant' === situation.logement.type && undefined !== situation.logement.membreFamilleProprietaire)">
        Valider
      </button>
    </div>
  </form>

  <div ng-if="situation.logement.formCompleted">
    <p>
      Vous êtes <b>{{ logementLabels[situation.logement.type] }}</b>
      <span ng-if="'locataire' === situation.logement.type">d'un logement de type <b>{{ locationTypesLabels[situation.logement.locationType] }}</b></span>
      <span ng-if="situation.logement.type !== 'gratuit'">
        <br>Votre {{ 'proprietaire' === situation.logement.type ? 'mensualité d\'emprunt' : 'loyer' }} s'élève à <b>{{ situation.logement.loyer }} €</b>
      </span>
      <br>Code postal <b>{{ situation.logement.adresse.codePostal }}</b>
      <span ng-show="undefined !== situation.logement.primoAccedant">
        <br>Vous {{ situation.logement.primoAccedant ? 'êtes' : 'n\'êtes pas' }} primo-accédant pour votre propriété
      </span>
      <span ng-show="undefined !== situation.logement.membreFamilleProprietaire">
        <br>Le propriétaire de votre logement {{ situation.logement.membreFamilleProprietaire ? 'est' : 'n\'est pas' }} un membre de votre famille
      </span>
    </p>
  </div>
</div>
